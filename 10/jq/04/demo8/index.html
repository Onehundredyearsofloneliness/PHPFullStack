<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<title>无标题文档</title>
<script type="text/javascript" src="js/jquery.js"></script>
</head>
<style type="text/css">
	*{margin:0px;padding:0px;}
	.box{ width:900px;height:500px;border:1px solid #ff0000;margin:50px auto;}
	.small{
		width:400px;
		height:400px;
		border:1px  solid #000000;
		float:left;
		position:relative;
	}
	.small b{
		width:100px;
		height:100px;
		background:#ff0000;
		opacity:0.4;
		filter:alpha(opacity=40);
		position:absolute;
		left:0px;
		top:0px;
		display:none;
	}
	.big{
		width:400px;
		height:400px;
		border:10px solid #00FF00;
		overflow:hidden;
		float:left;
		margin-left:15px;
		margin-top:30px;
		position:relative;
		display:none;
	}
	.big img{position:absolute;left:0px;top:0px;}
</style>
<script type="text/javascript">
	$(function(){
		$(".small").mousemove(function(e){
                        //alert(event.clientX);
				$("b").show();
				$(".big").show();
				//鼠标的位置  ,一下代码 计算小图的移动位置。 -50--351  e.pageX 鼠标的x坐标
				//var  L = e.pageX;
                                var  L = event.clientX;
				//计算方块中心到左边的边距
				var l = $(this).offset().left;
				var left = L - l - 50;
				//var T = e.pageY;
                                var T = e.clientY;
				var t =  $(this).offset().top;
				var top = T-t-50;
				
				//计算小图层超出左边界
				left  = left<0 ? 0 : left;
				top = top<0?0:top;
				//极端小图右边界
				left = left>300?300:left;
				top = top>300?300:top;
				$("b").css({left:left,top:top});
				//大图的移动
				var imgLeft = -left*2;
				var imgTop = -top*2;
				imgLeft = imgLeft<-400?-400:imgLeft;
				imgTop = imgTop<-400?-400:imgTop;
				$(".big img").css({left:imgLeft,top:imgTop});
		}).mouseout(function(){
			$(".small b").hide();
			$(".big").hide();
		})
	})
</script>
<body>
    
<div class="box">
	<div class="small"><img src="imgs/small.jpg" /><b>22</b></div>
	<div class="big"><img src="imgs/big.jpg"></div>
</div>
    
</body>
</html>
